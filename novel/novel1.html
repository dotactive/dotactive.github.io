<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Novel 1</title>
  <style>
    #novel-menu {
      position: fixed;
      top: 0;
      left: 0;
      width: 200px;
      padding: 10px;
    }

    #novel-content {
      margin-left: 220px;
      padding: 10px;
    }
  </style>
</head>
<body>
  <div id="novel-menu">
    <h2>Novel Menu</h2>
    <ul id="novel-list"></ul>
  </div>
  <div id="novel-content"></div>

  <script>
    function fetchTextFiles() {
      var novelList = document.getElementById("novel-list");
      var novelContent = document.getElementById("novel-content");

      // Fetch the list of text files
      fetch("https://raw.githubusercontent.com/pinktit/buried-seed/main/files.json")
        .then(function(response) {
          return response.json();
        })
        .then(function(data) {
          // Get the list of file names
          var fileNames = data.files;

          // Loop through the file names in the correct order
          fileNames.forEach(function(fileName) {
            var listItem = document.createElement("li");
            var link = document.createElement("a");
            link.textContent = fileName.replace(".txt", "");
            link.href = "#" + fileName.replace(".txt", "");
            listItem.appendChild(link);
            novelList.appendChild(listItem);

            // Fetch each text file
            fetch("https://raw.githubusercontent.com/pinktit/buried-seed/main/" + fileName)
              .then(function(response) {
                return response.text();
              })
              .then(function(fileContent) {
                var anchor = document.createElement("a");
                anchor.id = fileName.replace(".txt", "");
                novelContent.appendChild(anchor);

                var paragraphs = fileContent.split("\n");
                paragraphs.forEach(function(paragraphText) {
                  var paragraph = document.createElement("p");
                  paragraph.textContent = paragraphText;
                  anchor.appendChild(paragraph);

                  // Insert line break after each paragraph
                  var lineBreak = document.createElement("br");
                  anchor.appendChild(lineBreak);
                });
              })
              .catch(function(error) {
                console.log("Error fetching " + fileName + ": " + error);
              });
          });
        })
        .catch(function(error) {
          console.log("Error fetching file names: " + error);
        });
    }

    fetchTextFiles();
  </script>
</body>
</html>
